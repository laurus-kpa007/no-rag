# 키워드 검색(Keyword Search)과 BM25 알고리즘 심층 분석

네, **키워드 검색은 벡터 검색과는 완전히 다른 알고리즘**을 사용합니다.
보통 "Lexical Search(어휘 검색)" 또는 "Sparse Search(희소 검색)"라고 부르며, 그 핵심에는 **BM25**라는 알고리즘이 있습니다.

---

## 1. 벡터 검색 vs 키워드 검색 비교

| 특징 | 벡터 검색 (Vector Search) | 키워드 검색 (Keyword Search) |
| :-- | :-- | :-- |
| **핵심 원리** | **의미(Meaning)** 기반 | **단어(Term)** 일치 기반 |
| **방식** | 텍스트를 실수 행렬(Dense Vector)로 변환 | 단어의 빈도와 희소성(Sparse Vector) 분석 |
| **알고리즘** | Cosine Similarity (코사인 유사도) | **BM25 (TF-IDF의 개량형)** |
| **장점** | "강아지" 검색 시 "개", "푸들" 등 유의어 찾음 | 정확히 "XG-200"이라는 모델명을 찾을 때 강력함 |
| **단점** | 고유명사나 정확한 숫자에 약할 수 있음 | 단어가 다르면 의미가 같아도 못 찾음 ("PC" != "컴퓨터") |

---

## 2. 키워드 검색의 왕: BM25 (Best Matching 25)

엘라스틱서치(Elasticsearch), 솔라(Solr) 같은 검색 엔진이 기본적으로 사용하는 알고리즘입니다. 단순한 "단어 매칭"처럼 보이지만, 내부에는 정교한 통계학이 숨어 있습니다.

### 핵심 3요소
BM25 점수는 다음 세 가지를 조합하여 계산합니다.

1.  **TF (Term Frequency, 단어 빈도)**
    *   문서 내에서 검색어가 **얼마나 자주 등장하는가?**
    *   많이 나올수록 점수가 높지만, 무한정 높아지진 않고 특정 지점에서 포화(Saturation)됩니다.

2.  **IDF (Inverse Document Frequency, 역문서 빈도)**
    *   그 단어가 **얼마나 희귀한 단어인가?**
    *   예: "그리고", "합니다" 같은 흔한 단어는 점수를 낮게, "양자역학", "지포스3090" 같은 희귀 단어는 점수를 매우 높게 줍니다.

3.  **Field Length Normalization (문서 길이 정규화)**
    *   **문서 길이가 짧을수록** 점수를 더 줍니다.
    *   짧은 문서에서 검색어가 나왔다면 그 단어가 주제일 확률이 높고, 논문처럼 긴 문서에서 한 번 나온 건 우연일 수 있기 때문입니다.

---

## 3. 왜 하이브리드(Hybrid)인가?

벡터 검색만 쓰면 "아이폰 15"를 검색했을 때 "최신 스마트폰"이라는 문맥이 유사한 "갤럭시 S24" 문서가 나올 수도 있습니다. (의미가 비슷하니까요)

이때 **키워드 검색(BM25)**가 잡아줍니다.
> *"잠깐, 의미도 중요하지만 사용자가 '아이폰'이랑 '15'라고 딱 집어서 말했잖아. 이 단어가 반드시 포함된 문서를 우선순위로 올려!"*

이것이 바로 벡터(의미)와 키워드(정확성)를 섞어서 쓰는 **하이브리드 검색**이 강력한 이유입니다.
